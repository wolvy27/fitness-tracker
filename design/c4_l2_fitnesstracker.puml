@startuml C4_Level2_FitnessTracker
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

Person(user, "Fitness App User", "Tracks workouts, meals, and progress")

System_Boundary(fitnessSystem, "Fitness Tracker System") {
    Container(apiGateway, "API Gateway", "Spring Cloud Gateway", "Routes requests to appropriate services")

    Container(userService, "User Service", "Spring Boot", "Manages user profiles and goals")
    ContainerDb(userDb, "User Database", "MySQL", "Stores user data")

    Container(workoutService, "Workout Service", "Spring Boot", "Manages workout data")
    ContainerDb(workoutDb, "Workout Database", "MySQL", "Stores workout records")

    Container(mealService, "Meal Service", "Spring Boot", "Manages meal logging")
    ContainerDb(mealDb, "Meal Database", "PostgreSQL", "Stores meal records")
}

' External interactions
Rel(user, apiGateway, "Uses", "HTTPS/JSON")

' API Gateway to services
Rel(apiGateway, userService, "Routes to", "HTTP")
Rel(apiGateway, workoutService, "Routes to", "HTTP")
Rel(apiGateway, mealService, "Routes to", "HTTP")

' Services to their databases
Rel(userService, userDb, "Reads/Writes", "JDBC")
Rel(workoutService, workoutDb, "Reads/Writes", "JDBC")
Rel(mealService, mealDb, "Reads/Writes", "JDBC")


@enduml